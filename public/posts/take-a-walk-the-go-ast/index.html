<!DOCTYPE html>

<html lang="en-us">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="format-detection" content="telephone=no"/>

    <title>Ryo Nakao</title>
    
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#FF3DB4">
    <meta name="theme-color" content="#ffffff">

    
    
    
    <link rel="stylesheet" href="https://nakabonne.dev/css/main.min.03322cbe6bddfc28e7b17b84bc5446282a510b14b57be3371ba1f68ef1ab9ce8.css"/>

    
    
    

    
    
 
    
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-162006077-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://nakabonne.dev/img/ast-file-tree.png"/>

<meta name="twitter:title" content="Take a walk the Go AST"/>
<meta name="twitter:description" content="Deepen your understanding of Go&#39;s AST by actually walking through it."/>

    <meta property="og:title" content="Take a walk the Go AST" />
<meta property="og:description" content="Deepen your understanding of Go&#39;s AST by actually walking through it." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://nakabonne.dev/posts/take-a-walk-the-go-ast/" />
<meta property="og:image" content="https://nakabonne.dev/img/ast-file-tree.png" />
<meta property="article:published_time" content="2020-03-31T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-03-31T00:00:00+00:00" /><meta property="og:site_name" content="Ryo Nakao" />

</head>

    <body>
        
<nav>
  <header>
    <div class="site-title">
        <a href="/">Ryo Nakao</a>
    </div>  
</header>
  <div class="nav-menu">
  
    <a class="color-link nav-link" href="/about/">About</a>
  
    <a class="color-link nav-link" href="/tags/">Tags</a>
  
  <a class="color-link nav-link" href="https://nakabonne.dev/index.xml" target="_blank" rel="noopener" type="application/rss+xml">RSS</a>
</div>

<footer class="footer">
	<div class="social-icons">
        

    

    
    <a class="social-icon" href="https://twitter.com/nakabonne" target="_blank" rel="noopener" title="Twitter">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M8.991284,24.971612 C19.180436,24.971612 24.752372,16.530224 24.752372,9.210524 C24.752372,8.970656 24.747512,8.731868 24.736496,8.494376 C25.818008,7.712564 26.758256,6.737 27.5,5.62622 C26.507372,6.067076 25.439252,6.364292 24.318752,6.498212 C25.462472,5.812628 26.340512,4.727444 26.754584,3.434036 C25.684088,4.068536 24.499004,4.53002 23.23724,4.778528 C22.226468,3.701876 20.786828,3.028388 19.193828,3.028388 C16.134404,3.028388 13.653536,5.509256 13.653536,8.567492 C13.653536,9.0023 13.702244,9.424904 13.797176,9.830552 C9.19346,9.599108 5.11106,7.39472 2.3792,4.04294 C1.903028,4.861364 1.629032,5.812628 1.629032,6.827072 C1.629032,8.74904 2.606972,10.445612 4.094024,11.438132 C3.185528,11.41016 2.331788,11.160464 1.585184,10.745096 C1.583888,10.768208 1.583888,10.791428 1.583888,10.815728 C1.583888,13.49888 3.493652,15.738584 6.028088,16.246508 C5.562932,16.373084 5.07326,16.44134 4.56782,16.44134 C4.210988,16.44134 3.863876,16.406024 3.526484,16.34144 C4.231724,18.542264 6.276596,20.143796 8.701412,20.18894 C6.805148,21.674696 4.416836,22.56008 1.821488,22.56008 C1.374476,22.56008 0.93362,22.534592 0.5,22.4834 C2.951708,24.054476 5.862524,24.971612 8.991284,24.971612"></path>
        </svg>
    </a>
    

    

    

    

    

    

    

    

    

    
    <a class="social-icon" href="https://www.linkedin.com/in/nakabonne" target="_blank" rel="noopener" title="LinkedIn">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M2,3.654102 C2,2.69908141 2.79442509,1.92397846 3.77383592,1.92397846 L24.2261641,1.92397846 C25.2058917,1.92397846 26,2.69908141 26,3.654102 L26,24.3462148 C26,25.3015521 25.2058917,26.0760215 24.2261641,26.0760215 L3.77383592,26.0760215 C2.79442509,26.0760215 2,25.3015521 2,24.3465315 L2,3.65378524 L2,3.654102 Z M9.27526132,22.1415901 L9.27526132,11.2356668 L5.65030092,11.2356668 L5.65030092,22.1415901 L9.27557808,22.1415901 L9.27526132,22.1415901 Z M7.46341463,9.74691162 C8.72727273,9.74691162 9.51409566,8.90940767 9.51409566,7.86284447 C9.49033893,6.79252455 8.72727273,5.97846056 7.48748812,5.97846056 C6.24675325,5.97846056 5.43649034,6.79252455 5.43649034,7.86284447 C5.43649034,8.90940767 6.22299652,9.74691162 7.4396579,9.74691162 L7.46309788,9.74691162 L7.46341463,9.74691162 Z M11.2815965,22.1415901 L14.9062401,22.1415901 L14.9062401,16.0519481 C14.9062401,15.7263225 14.9299968,15.4000634 15.0256573,15.1675641 C15.2876148,14.5159962 15.8840672,13.8416218 16.8856509,13.8416218 C18.1970225,13.8416218 18.7218879,14.8416218 18.7218879,16.3078872 L18.7218879,22.1415901 L22.3465315,22.1415901 L22.3465315,15.8885017 C22.3465315,12.5388027 20.5584416,10.9800443 18.1735825,10.9800443 C16.2182452,10.9800443 15.3595185,12.072854 14.8824834,12.8172315 L14.9065569,12.8172315 L14.9065569,11.2359835 L11.2819132,11.2359835 C11.3291099,12.2591067 11.2815965,22.1419069 11.2815965,22.1419069 L11.2815965,22.1415901 Z"></path>
        </svg>
    </a>
    

    

    

    

    

    

    

    
    
    
    <a class="social-icon" href="https://github.com/nakabonne" target="_blank" rel="noopener" title="GitHub">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M13.9988029,1.32087331 C6.82105037,1.32087331 1,7.14112562 1,14.3212723 C1,20.0649109 4.72454649,24.9370678 9.89038951,26.6560892 C10.5408085,26.7757983 10.7778323,26.374374 10.7778323,26.0296121 C10.7778323,25.7215609 10.7666595,24.9035493 10.760275,23.8189856 C7.14426471,24.6042767 6.38131925,22.0760223 6.38131925,22.0760223 C5.78995672,20.5740732 4.93762853,20.1742451 4.93762853,20.1742451 C3.75729765,19.3682044 5.02701126,19.3841656 5.02701126,19.3841656 C6.33183953,19.4759425 7.01817121,20.7241085 7.01817121,20.7241085 C8.17775254,22.7104801 10.0611744,22.1366749 10.8017741,21.8038838 C10.919887,20.9643246 11.2558703,20.3913175 11.6269683,20.066507 C8.74038491,19.7385043 5.70536235,18.6228163 5.70536235,13.6413251 C5.70536235,12.2223743 6.21213051,11.0611968 7.04370914,10.1530044 C6.90963504,9.82420367 6.46351945,8.50181809 7.17139875,6.71256734 C7.17139875,6.71256734 8.26234691,6.36301702 10.7459099,8.04532771 C11.78259,7.75642995 12.8950858,7.61277914 14.000399,7.60719272 C15.1049142,7.61277914 16.2166119,7.75642995 17.2548881,8.04532771 C19.736855,6.36301702 20.8262071,6.71256734 20.8262071,6.71256734 C21.5356825,8.50181809 21.0895669,9.82420367 20.9562909,10.1530044 C21.7894656,11.0611968 22.2922435,12.2223743 22.2922435,13.6413251 C22.2922435,18.6355852 19.2524325,19.734514 16.3570705,20.0561322 C16.8231376,20.4575564 17.2389269,21.2508282 17.2389269,22.4638795 C17.2389269,24.2012564 17.2229657,25.603448 17.2229657,26.0296121 C17.2229657,26.3775663 17.4575954,26.7821827 18.116793,26.6552912 C23.2786458,24.9322794 27,20.0633148 27,14.3212723 C27,7.14112562 21.1789496,1.32087331 13.9988029,1.32087331"></path>
        </svg>
    </a>
    

    
    
    

    

    

    

    

</div>




	<script src="https://nakabonne.dev/js/main.min.fa5c2b23e07b5d9bfad267a52b4b24fdb053e6fb7524993383594926a3ac270c.js" integrity="sha256-+lwrI+B7XZv60melK0sk/bBT5vt1JJkzg1lJJqOsJww="></script>
</footer>

</nav>
        <div id="content" class="content-container">
        
<h1 class="post-title">Take a walk the Go AST</h1>
    
    <time>March 31, 2020</time>
    
    <div>
        <p>
        <p>What do you refer to when you&rsquo;re curious about the Go AST? A document? Source code?
While reading the documentation helps you understand it in the abstract, you can&rsquo;t see how APIs relate to each other, etc.
Not to mention, read the entire source code and you&rsquo;ll see it completely, but you should get tired from trying to read the whole stuff.</p>
<p>Therefore, this article aims to be in the middle of them. Let&rsquo;s take it easy and take a walk through AST to understand how the Go code we usually write is represented internally.</p>
<p>It doesn&rsquo;t delve into how to parse the source code, and starts with the description after the AST is built.
If you&rsquo;re curious about how the code is converted to the AST, navigate to <a href="https://nakabonne.dev/posts/digging-deeper-into-the-analysis-of-go-code/">Digging deeper into the analysis of Go-code</a>.</p>
<p>Letâ€™s get started!</p>
<h2 id="interfaces">Interfaces</h2>
<p>First up, let me briefly describe the interface that represents each of the AST nodes.
All AST nodes implement the <a href="https://pkg.go.dev/go/ast?tab=doc#Node"><code>ast.Node</code></a> interface, which just returns a position in the AST.<br>
In addtion, there are 3 main interfaces that implement <code>ast.Node</code>:</p>
<ul>
<li><a href="https://pkg.go.dev/go/ast?tab=doc#Expr">ast.Expr</a> â€” representing expressions and types node</li>
<li><a href="https://pkg.go.dev/go/ast?tab=doc#Stmt">ast.Stmt</a> â€” representing statement node</li>
<li><a href="https://pkg.go.dev/go/ast?tab=doc#Decl">ast.Decl</a> â€” representing declaration node</li>
</ul>
<figure>
    <img src="/img/node-interface.png" width="100%" height="auto"/> 
</figure>

<p>You can see from the definition that every Node satisfies the <code>ast.Node</code> interface:</p>
<p><a href="https://github.com/golang/go/blob/0b7c202e98949b530f7f4011efd454164356ba69/src/go/ast/ast.go#L32-L54">ast/ast.go</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// All node types implement the Node interface.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Node</span> <span style="color:#66d9ef">interface</span> {
	<span style="color:#a6e22e">Pos</span>() <span style="color:#a6e22e">token</span>.<span style="color:#a6e22e">Pos</span> <span style="color:#75715e">// position of first character belonging to the node
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">End</span>() <span style="color:#a6e22e">token</span>.<span style="color:#a6e22e">Pos</span> <span style="color:#75715e">// position of first character immediately after the node
</span><span style="color:#75715e"></span>}

<span style="color:#75715e">// All expression nodes implement the Expr interface.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Expr</span> <span style="color:#66d9ef">interface</span> {
	<span style="color:#a6e22e">Node</span>
	<span style="color:#a6e22e">exprNode</span>()
}

<span style="color:#75715e">// All statement nodes implement the Stmt interface.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Stmt</span> <span style="color:#66d9ef">interface</span> {
	<span style="color:#a6e22e">Node</span>
	<span style="color:#a6e22e">stmtNode</span>()
}

<span style="color:#75715e">// All declaration nodes implement the Decl interface.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Decl</span> <span style="color:#66d9ef">interface</span> {
	<span style="color:#a6e22e">Node</span>
	<span style="color:#a6e22e">declNode</span>()
}
</code></pre></div><h2 id="getting-started-with-walking">Getting started with walking</h2>
<p>Let&rsquo;s start walking! Take a look at the file we convert to the AST:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">hello</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">greet</span>() {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Hello, World&#34;</span>)
}
</code></pre></div><p>Nothing fancy â€” an overly simple Hello, World program. The AST built on this is:</p>
<details>
  <summary>ast.File</summary>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">File</span> {
.  <span style="color:#a6e22e">Package</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">1</span>:<span style="color:#ae81ff">1</span>
.  <span style="color:#a6e22e">Name</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Ident</span> {
.  .  <span style="color:#a6e22e">NamePos</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">1</span>:<span style="color:#ae81ff">9</span>
.  .  <span style="color:#a6e22e">Name</span>: <span style="color:#e6db74">&#34;hello&#34;</span>
.  }
.  <span style="color:#a6e22e">Decls</span>: []<span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Decl</span> (<span style="color:#a6e22e">len</span> = <span style="color:#ae81ff">2</span>) {
.  .  <span style="color:#ae81ff">0</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">GenDecl</span> {
.  .  .  <span style="color:#a6e22e">TokPos</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">3</span>:<span style="color:#ae81ff">1</span>
.  .  .  <span style="color:#a6e22e">Tok</span>: <span style="color:#f92672">import</span>
.  .  .  <span style="color:#a6e22e">Lparen</span>: <span style="color:#f92672">-</span>
.  .  .  <span style="color:#a6e22e">Specs</span>: []<span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Spec</span> (<span style="color:#a6e22e">len</span> = <span style="color:#ae81ff">1</span>) {
.  .  .  .  <span style="color:#ae81ff">0</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">ImportSpec</span> {
.  .  .  .  .  <span style="color:#a6e22e">Path</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">BasicLit</span> {
.  .  .  .  .  .  <span style="color:#a6e22e">ValuePos</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">3</span>:<span style="color:#ae81ff">8</span>
.  .  .  .  .  .  <span style="color:#a6e22e">Kind</span>: <span style="color:#a6e22e">STRING</span>
.  .  .  .  .  .  <span style="color:#a6e22e">Value</span>: <span style="color:#e6db74">&#34;\&#34;fmt\&#34;&#34;</span>
.  .  .  .  .  }
.  .  .  .  .  <span style="color:#a6e22e">EndPos</span>: <span style="color:#f92672">-</span>
.  .  .  .  }
.  .  .  }
.  .  .  <span style="color:#a6e22e">Rparen</span>: <span style="color:#f92672">-</span>
.  .  }
.  .  <span style="color:#ae81ff">1</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">FuncDecl</span> {
.  .  .  <span style="color:#a6e22e">Name</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Ident</span> {
.  .  .  .  <span style="color:#a6e22e">NamePos</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">5</span>:<span style="color:#ae81ff">6</span>
.  .  .  .  <span style="color:#a6e22e">Name</span>: <span style="color:#e6db74">&#34;greet&#34;</span>
.  .  .  .  <span style="color:#a6e22e">Obj</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Object</span> {
.  .  .  .  .  <span style="color:#a6e22e">Kind</span>: <span style="color:#66d9ef">func</span>
.  .  .  .  .  <span style="color:#a6e22e">Name</span>: <span style="color:#e6db74">&#34;greet&#34;</span>
.  .  .  .  .  <span style="color:#a6e22e">Decl</span>: <span style="color:#f92672">*</span>(<span style="color:#a6e22e">obj</span> <span style="color:#960050;background-color:#1e0010">@</span> <span style="color:#ae81ff">23</span>)
.  .  .  .  }
.  .  .  }
.  .  .  <span style="color:#a6e22e">Type</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">FuncType</span> {
.  .  .  .  <span style="color:#a6e22e">Func</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">5</span>:<span style="color:#ae81ff">1</span>
.  .  .  .  <span style="color:#a6e22e">Params</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">FieldList</span> {
.  .  .  .  .  <span style="color:#a6e22e">Opening</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">5</span>:<span style="color:#ae81ff">11</span>
.  .  .  .  .  <span style="color:#a6e22e">Closing</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">5</span>:<span style="color:#ae81ff">12</span>
.  .  .  .  }
.  .  .  }
.  .  .  <span style="color:#a6e22e">Body</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">BlockStmt</span> {
.  .  .  .  <span style="color:#a6e22e">Lbrace</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">5</span>:<span style="color:#ae81ff">14</span>
.  .  .  .  <span style="color:#a6e22e">List</span>: []<span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Stmt</span> (<span style="color:#a6e22e">len</span> = <span style="color:#ae81ff">1</span>) {
.  .  .  .  .  <span style="color:#ae81ff">0</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">ExprStmt</span> {
.  .  .  .  .  .  <span style="color:#a6e22e">X</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">CallExpr</span> {
.  .  .  .  .  .  .  <span style="color:#a6e22e">Fun</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">SelectorExpr</span> {
.  .  .  .  .  .  .  .  <span style="color:#a6e22e">X</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Ident</span> {
.  .  .  .  .  .  .  .  .  <span style="color:#a6e22e">NamePos</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">6</span>:<span style="color:#ae81ff">2</span>
.  .  .  .  .  .  .  .  .  <span style="color:#a6e22e">Name</span>: <span style="color:#e6db74">&#34;fmt&#34;</span>
.  .  .  .  .  .  .  .  }
.  .  .  .  .  .  .  .  <span style="color:#a6e22e">Sel</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Ident</span> {
.  .  .  .  .  .  .  .  .  <span style="color:#a6e22e">NamePos</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">6</span>:<span style="color:#ae81ff">6</span>
.  .  .  .  .  .  .  .  .  <span style="color:#a6e22e">Name</span>: <span style="color:#e6db74">&#34;Println&#34;</span>
.  .  .  .  .  .  .  .  }
.  .  .  .  .  .  .  }
.  .  .  .  .  .  .  <span style="color:#a6e22e">Lparen</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">6</span>:<span style="color:#ae81ff">13</span>
.  .  .  .  .  .  .  <span style="color:#a6e22e">Args</span>: []<span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Expr</span> (<span style="color:#a6e22e">len</span> = <span style="color:#ae81ff">1</span>) {
.  .  .  .  .  .  .  .  <span style="color:#ae81ff">0</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">BasicLit</span> {
.  .  .  .  .  .  .  .  .  <span style="color:#a6e22e">ValuePos</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">6</span>:<span style="color:#ae81ff">14</span>
.  .  .  .  .  .  .  .  .  <span style="color:#a6e22e">Kind</span>: <span style="color:#a6e22e">STRING</span>
.  .  .  .  .  .  .  .  .  <span style="color:#a6e22e">Value</span>: <span style="color:#e6db74">&#34;\&#34;Hello, World\&#34;&#34;</span>
.  .  .  .  .  .  .  .  }
.  .  .  .  .  .  .  }
.  .  .  .  .  .  .  <span style="color:#a6e22e">Ellipsis</span>: <span style="color:#f92672">-</span>
.  .  .  .  .  .  .  <span style="color:#a6e22e">Rparen</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">6</span>:<span style="color:#ae81ff">28</span>
.  .  .  .  .  .  }
.  .  .  .  .  }
.  .  .  .  }
.  .  .  .  <span style="color:#a6e22e">Rbrace</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">7</span>:<span style="color:#ae81ff">1</span>
.  .  .  }
.  .  }
.  }
.  <span style="color:#a6e22e">Scope</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Scope</span> {
.  .  <span style="color:#a6e22e">Objects</span>: <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Object</span> (<span style="color:#a6e22e">len</span> = <span style="color:#ae81ff">1</span>) {
.  .  .  <span style="color:#e6db74">&#34;greet&#34;</span>: <span style="color:#f92672">*</span>(<span style="color:#a6e22e">obj</span> <span style="color:#960050;background-color:#1e0010">@</span> <span style="color:#ae81ff">27</span>)
.  .  }
.  }
.  <span style="color:#a6e22e">Imports</span>: []<span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">ImportSpec</span> (<span style="color:#a6e22e">len</span> = <span style="color:#ae81ff">1</span>) {
.  .  <span style="color:#ae81ff">0</span>: <span style="color:#f92672">*</span>(<span style="color:#a6e22e">obj</span> <span style="color:#960050;background-color:#1e0010">@</span> <span style="color:#ae81ff">12</span>)
.  }
.  <span style="color:#a6e22e">Unresolved</span>: []<span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Ident</span> (<span style="color:#a6e22e">len</span> = <span style="color:#ae81ff">1</span>) {
.  .  <span style="color:#ae81ff">0</span>: <span style="color:#f92672">*</span>(<span style="color:#a6e22e">obj</span> <span style="color:#960050;background-color:#1e0010">@</span> <span style="color:#ae81ff">46</span>)
.  }
}
</code></pre></div></details>
<h4 id="how-to-walk">How to walk</h4>
<p>All we have to do is traverse this AST node in depth-first order.
Let&rsquo;s print each Node one by one by calling <a href="https://pkg.go.dev/go/ast?tab=doc#Inspect"><code>ast.Inspect()</code></a> recursively.</p>
<p>Also, printing AST directly then we will typically see stuff that is not human readable.
To prevent that from happening, we&rsquo;re going to use <a href="https://pkg.go.dev/go/ast?tab=doc#Print"><code>ast.Print</code></a>, a powerful API for human reading of AST:</p>
<details>
  <summary>walk.go</summary>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;fmt&#34;</span>
	<span style="color:#e6db74">&#34;go/ast&#34;</span>
	<span style="color:#e6db74">&#34;go/parser&#34;</span>
	<span style="color:#e6db74">&#34;go/token&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">fset</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">token</span>.<span style="color:#a6e22e">NewFileSet</span>()
	<span style="color:#a6e22e">f</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">parser</span>.<span style="color:#a6e22e">ParseFile</span>(<span style="color:#a6e22e">fset</span>, <span style="color:#e6db74">&#34;dummy.go&#34;</span>, <span style="color:#a6e22e">src</span>, <span style="color:#a6e22e">parser</span>.<span style="color:#a6e22e">ParseComments</span>)

	<span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Inspect</span>(<span style="color:#a6e22e">f</span>, <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">n</span> <span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Node</span>) <span style="color:#66d9ef">bool</span> {
        <span style="color:#75715e">// Called recursively.
</span><span style="color:#75715e"></span>		<span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Print</span>(<span style="color:#a6e22e">fset</span>, <span style="color:#a6e22e">n</span>)
		<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>
	})
}

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">src</span> = <span style="color:#e6db74">`package hello
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">import &#34;fmt&#34;
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">func greet() {
</span><span style="color:#e6db74">	fmt.Println(&#34;Hello, World&#34;)
</span><span style="color:#e6db74">}
</span><span style="color:#e6db74">`</span>
</code></pre></div></details>
<h3 id="astfile">ast.File</h3>
<p>The first Node to visit is <a href="https://pkg.go.dev/go/ast?tab=doc#File"><code>*ast.File</code></a>, which is the root of all AST nodes.
It implements only the <code>ast.Node</code> interface.</p>
<figure>
    <img src="/img/ast-file-tree.png" width="100%" height="auto"/> 
</figure>

<p><code>ast.File</code> has references to a package name, import declarations, and function declarations as child nodes.
To be precise, it has also <code>Comments</code> and so on, but let me omit them for simplicity.
Let&rsquo;s start with Package Name.</p>
<p>(Note that fields with a nil value are omitted. See <a href="https://pkg.go.dev/go/ast">the document</a> for a complete list of fields for each node type.)</p>
<h3 id="package-name">Package Name</h3>
<h4 id="astident">ast.Ident</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Ident</span> {
.  <span style="color:#a6e22e">NamePos</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">1</span>:<span style="color:#ae81ff">9</span>
.  <span style="color:#a6e22e">Name</span>: <span style="color:#e6db74">&#34;hello&#34;</span>
}
</code></pre></div><p>A package name can be represented by the AST node type <a href="https://pkg.go.dev/go/ast?tab=doc#Ident"><code>*ast.Ident</code></a>, which implements the <code>ast.Expr</code> interface.
All identifiers are represented by this structure. It mainly contains its name and a source position within a file set.<br>
From the code shown above, we can see that the package name is <code>hello</code> and is declared in the first line of <code>dummy.go</code>.</p>
<p>We can&rsquo;t dive any deeper into this node, let&rsquo;s go back to the <code>*ast.File</code>.</p>
<h3 id="import-declarations">Import Declarations</h3>
<h4 id="astgendecl">ast.GenDecl</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">GenDecl</span> {
.  <span style="color:#a6e22e">TokPos</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">3</span>:<span style="color:#ae81ff">1</span>
.  <span style="color:#a6e22e">Tok</span>: <span style="color:#f92672">import</span>
.  <span style="color:#a6e22e">Lparen</span>: <span style="color:#f92672">-</span>
.  <span style="color:#a6e22e">Specs</span>: []<span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Spec</span> (<span style="color:#a6e22e">len</span> = <span style="color:#ae81ff">1</span>) {
.  .  <span style="color:#ae81ff">0</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">ImportSpec</span> {<span style="color:#75715e">/* Omission */</span>}
.  }
.  <span style="color:#a6e22e">Rparen</span>: <span style="color:#f92672">-</span>
}
</code></pre></div><p>A declaration of import is represented by the AST node type <a href="https://pkg.go.dev/go/ast?tab=doc#GenDecl"><code>*ast.GenDecl</code></a>, which implements the <code>ast.Decl</code> interface.
<code>ast.GenDecl</code> represents all declarations except for functions; That is, import, const, var, and type.</p>
<p><code>Tok</code> represents a lexical token â€” which is specifies what the declaration is about (IMPORT or CONST or TYPE or VAR).<br>
This AST Node tells us that the import declaration is on line 3 in <code>dummy.go</code>.</p>
<p>Let&rsquo;s visit <code>ast.GenDecl</code> in depth-first order. Take a look <code>*ast.ImportSpec</code>, the next Node.</p>
<h4 id="astimportspec">ast.ImportSpec</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">ImportSpec</span> {
.  <span style="color:#a6e22e">Path</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">BasicLit</span> {<span style="color:#75715e">/* Omission */</span>}
.  <span style="color:#a6e22e">EndPos</span>: <span style="color:#f92672">-</span>
}
</code></pre></div><p>An <a href="https://pkg.go.dev/go/ast?tab=doc#ImportSpec"><code>ast.ImportSpec</code></a> node corresponds to a single import declaration.
It implements the <a href="https://pkg.go.dev/go/ast?tab=doc#Spec"><code>ast.Spec</code></a> interface.
Visiting <code>Path</code> could make more sense about the import path. Let&rsquo;s go there.</p>
<h4 id="astbasiclit">ast.BasicLit</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">BasicLit</span> {
.  <span style="color:#a6e22e">ValuePos</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">3</span>:<span style="color:#ae81ff">8</span>
.  <span style="color:#a6e22e">Kind</span>: <span style="color:#a6e22e">STRING</span>
.  <span style="color:#a6e22e">Value</span>: <span style="color:#e6db74">&#34;\&#34;fmt\&#34;&#34;</span>
}
</code></pre></div><p>An <a href="https://pkg.go.dev/go/ast?tab=doc#BasicLit"><code>ast.BasicLit</code></a> node represents a literal of basic type.
It implements the <code>ast.Expr</code> interface.
This contains a type of token and <code>token.INT</code>, <code>token.FLOAT</code>, <code>token.IMAG</code>, <code>token.CHAR</code>, or <code>token.STRING</code> can be used.<br>
From <code>ast.ImportSpec</code> and <code>ast.BasicLit</code>, we can see it has imported package called &ldquo;fmt&rdquo;.</p>
<p>We can&rsquo;t dive any deeper, let&rsquo;s get back to the top level again.</p>
<h3 id="function-declarations">Function Declarations</h3>
<h4 id="astfuncdecl">ast.FuncDecl</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">FuncDecl</span> {
.  <span style="color:#a6e22e">Name</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Ident</span> {<span style="color:#75715e">/* Omission */</span>}
.  <span style="color:#a6e22e">Type</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">FuncType</span> {<span style="color:#75715e">/* Omission */</span>}
.  <span style="color:#a6e22e">Body</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">BlockStmt</span> {<span style="color:#75715e">/* Omission */</span>}
}
</code></pre></div><p>An <a href="https://pkg.go.dev/go/ast?tab=doc#FuncDecl"><code>ast.FuncDecl</code></a> node represents a function declaration.
It implements only the <code>ast.Node</code> interface.
Let&rsquo;s take a look at them in order from <code>Name</code>, representing a function name.</p>
<h4 id="astident-1">ast.Ident</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Ident</span> {
.  <span style="color:#a6e22e">NamePos</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">5</span>:<span style="color:#ae81ff">6</span>
.  <span style="color:#a6e22e">Name</span>: <span style="color:#e6db74">&#34;greet&#34;</span>
.  <span style="color:#a6e22e">Obj</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Object</span> {
.  .  <span style="color:#a6e22e">Kind</span>: <span style="color:#66d9ef">func</span>
.  .  <span style="color:#a6e22e">Name</span>: <span style="color:#e6db74">&#34;greet&#34;</span>
.  .  <span style="color:#a6e22e">Decl</span>: <span style="color:#f92672">*</span>(<span style="color:#a6e22e">obj</span> <span style="color:#960050;background-color:#1e0010">@</span> <span style="color:#ae81ff">0</span>)
.  }
}
</code></pre></div><p>The second time this has appeared, let me skip the basic explanation.</p>
<p>Noteworthy is the <a href="https://pkg.go.dev/go/ast?tab=doc#Object"><code>*ast.Object</code></a>.
It represents the object to which the identifier refers, but why is this needed?
As you know, Go has a concept of scope, which is the extent of source text in which the identifier denotes the specified constant, type, variable, function, label, or package.</p>
<p>The <code>Decl</code> field indicates where the identifier was declared so that it identifies the scope of the identifier.
Identifiers that point to the identical object share the identical <code>*ast.Object</code>.</p>
<h4 id="astfunctype">ast.FuncType</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">FuncType</span> {
.  <span style="color:#a6e22e">Func</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">5</span>:<span style="color:#ae81ff">1</span>
.  <span style="color:#a6e22e">Params</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">FieldList</span> {<span style="color:#75715e">/* Omission */</span>}
}
</code></pre></div><p>Go back to being a parent one generation older, an <a href="https://pkg.go.dev/go/ast?tab=doc#FuncType"><code>ast.FuncType</code></a> contains a function signature including parameters, results, and position of &ldquo;func&rdquo; keyword.</p>
<h4 id="astfieldlist">ast.FieldList</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">FieldList</span> {
.  <span style="color:#a6e22e">Opening</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">5</span>:<span style="color:#ae81ff">11</span>
.  <span style="color:#a6e22e">List</span>: <span style="color:#66d9ef">nil</span>
.  <span style="color:#a6e22e">Closing</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">5</span>:<span style="color:#ae81ff">12</span>
}
</code></pre></div><p>An <a href="https://pkg.go.dev/go/ast?tab=doc#FieldList"><code>ast.FieldList</code></a> node represents a list of Fields, enclosed by parentheses or braces.
Function parameters would be shown here if they are defined, but this time none, so no information.</p>
<p><code>List</code> field is a slice of <a href="https://pkg.go.dev/go/ast?tab=doc#Field"><code>*ast.Field</code></a> that contains a pair of identifiers and types.
It is highly versatile and is used for a variety of Nodes, including <a href="https://pkg.go.dev/go/ast?tab=doc#StructType"><code>*ast.StructType</code></a>, <a href="https://pkg.go.dev/go/ast?tab=doc#InterfaceType"><code>*ast.InterfaceType</code></a>, and here.
That is, it&rsquo;s needed when mapping a type to an identifier as shown below:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">foo</span> <span style="color:#66d9ef">int</span>
<span style="color:#a6e22e">bar</span> <span style="color:#66d9ef">string</span>
</code></pre></div><p>Let&rsquo;s loop back to <code>*ast.FuncDecl</code> again and dive a bit into <code>Body</code>, the last field.</p>
<h4 id="astblockstmt">ast.BlockStmt</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">BlockStmt</span> {
.  <span style="color:#a6e22e">Lbrace</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">5</span>:<span style="color:#ae81ff">14</span>
.  <span style="color:#a6e22e">List</span>: []<span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Stmt</span> (<span style="color:#a6e22e">len</span> = <span style="color:#ae81ff">1</span>) {
.  .  <span style="color:#ae81ff">0</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">ExprStmt</span> {<span style="color:#75715e">/* Omission */</span>}
.  }
.  <span style="color:#a6e22e">Rbrace</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">7</span>:<span style="color:#ae81ff">1</span>
}
</code></pre></div><p>An <a href="https://pkg.go.dev/go/ast?tab=doc#BlockStmt"><code>ast.BlockStmt</code></a> node represents a braced statement list.
It implements  the <code>ast.Stmt</code> interface.
It does have a list of statements. What an imaginable node!</p>
<h4 id="astexprstmt">ast.ExprStmt</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">ExprStmt</span> {
.  <span style="color:#a6e22e">X</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">CallExpr</span> {<span style="color:#75715e">/* Omission */</span>}
}
</code></pre></div><p><a href="https://pkg.go.dev/go/ast?tab=doc#ExprStmt"><code>ast.ExprStmt</code></a> represents an expression in a statement list.
It implements the <code>ast.Stmt</code> interface and contains a single <code>ast.Expr</code>.</p>
<h4 id="astcallexpr">ast.CallExpr</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">CallExpr</span> {
.  <span style="color:#a6e22e">Fun</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">SelectorExpr</span> {<span style="color:#75715e">/* Omission */</span>}
.  <span style="color:#a6e22e">Lparen</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">6</span>:<span style="color:#ae81ff">13</span>
.  <span style="color:#a6e22e">Args</span>: []<span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Expr</span> (<span style="color:#a6e22e">len</span> = <span style="color:#ae81ff">1</span>) {
.  .  <span style="color:#ae81ff">0</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">BasicLit</span> {<span style="color:#75715e">/* Omission */</span>}
.  }
.  <span style="color:#a6e22e">Ellipsis</span>: <span style="color:#f92672">-</span>
.  <span style="color:#a6e22e">Rparen</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">6</span>:<span style="color:#ae81ff">28</span>
}
</code></pre></div><p><a href="https://pkg.go.dev/go/ast?tab=doc#CallExpr"><code>ast.CallExpr</code></a> represents an expression that calls a function.
The fields to look at are <code>Fun</code>, the function to call and <code>Args</code>, the list of arguments to pass to it.</p>
<h4 id="astselectorexpr">ast.SelectorExpr</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">SelectorExpr</span> {
.  <span style="color:#a6e22e">X</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Ident</span> {
.  .  <span style="color:#a6e22e">NamePos</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">6</span>:<span style="color:#ae81ff">2</span>
.  .  <span style="color:#a6e22e">Name</span>: <span style="color:#e6db74">&#34;fmt&#34;</span>
.  }
.  <span style="color:#a6e22e">Sel</span>: <span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">Ident</span> {
.  .  <span style="color:#a6e22e">NamePos</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">6</span>:<span style="color:#ae81ff">6</span>
.  .  <span style="color:#a6e22e">Name</span>: <span style="color:#e6db74">&#34;Println&#34;</span>
.  }
}
</code></pre></div><p><a href="https://pkg.go.dev/go/ast?tab=doc#SelectorExpr"><code>ast.SelectorExpr</code></a> represents an expression followed by a selector.
Simply put, it means <code>fmt.Println</code>.</p>
<h4 id="astbasiclit-1">ast.BasicLit</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">*</span><span style="color:#a6e22e">ast</span>.<span style="color:#a6e22e">BasicLit</span> {
.  <span style="color:#a6e22e">ValuePos</span>: <span style="color:#a6e22e">dummy</span>.<span style="color:#66d9ef">go</span>:<span style="color:#ae81ff">6</span>:<span style="color:#ae81ff">14</span>
.  <span style="color:#a6e22e">Kind</span>: <span style="color:#a6e22e">STRING</span>
.  <span style="color:#a6e22e">Value</span>: <span style="color:#e6db74">&#34;\&#34;Hello, World\&#34;&#34;</span>
}
</code></pre></div><p>No longer needed an explanation, Hello, World!</p>
<h2 id="bottom-line">Bottom Line</h2>
<p>I&rsquo;ve left out some of the fields in the node types I&rsquo;ve introduced, and there are still many other node types.</p>
<p>Nevertheless, I&rsquo;d say it&rsquo;s significant to actually walk the walk even if it&rsquo;s a bit rough.
And above all, itâ€™s quite a bit of fun.
Copy and paste the code shown in section &ldquo;How to walk&rdquo;, and have a try to walk around on your PC.</p>

        </p>
    </div>
    

    <div class="page-footer">
        
        <hr class="footer-divider">
        
            <a class="tag" href="/tags/golang">#Golang</a>
        
      
    </div>


        

<link rel="stylesheet" type="text/css" href="/css/katex.min.css">
<script type="text/javascript" src="/js/katex.min.js"></script>
<script type="text/javascript" src="/js/auto-render.min.js"onload="renderMathInElement(document.body);"></script>

        </div>
        
<footer class="footer-mobile">
	<div class="social-icons">
        

    

    
    <a class="social-icon" href="https://twitter.com/nakabonne" target="_blank" rel="noopener" title="Twitter">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M8.991284,24.971612 C19.180436,24.971612 24.752372,16.530224 24.752372,9.210524 C24.752372,8.970656 24.747512,8.731868 24.736496,8.494376 C25.818008,7.712564 26.758256,6.737 27.5,5.62622 C26.507372,6.067076 25.439252,6.364292 24.318752,6.498212 C25.462472,5.812628 26.340512,4.727444 26.754584,3.434036 C25.684088,4.068536 24.499004,4.53002 23.23724,4.778528 C22.226468,3.701876 20.786828,3.028388 19.193828,3.028388 C16.134404,3.028388 13.653536,5.509256 13.653536,8.567492 C13.653536,9.0023 13.702244,9.424904 13.797176,9.830552 C9.19346,9.599108 5.11106,7.39472 2.3792,4.04294 C1.903028,4.861364 1.629032,5.812628 1.629032,6.827072 C1.629032,8.74904 2.606972,10.445612 4.094024,11.438132 C3.185528,11.41016 2.331788,11.160464 1.585184,10.745096 C1.583888,10.768208 1.583888,10.791428 1.583888,10.815728 C1.583888,13.49888 3.493652,15.738584 6.028088,16.246508 C5.562932,16.373084 5.07326,16.44134 4.56782,16.44134 C4.210988,16.44134 3.863876,16.406024 3.526484,16.34144 C4.231724,18.542264 6.276596,20.143796 8.701412,20.18894 C6.805148,21.674696 4.416836,22.56008 1.821488,22.56008 C1.374476,22.56008 0.93362,22.534592 0.5,22.4834 C2.951708,24.054476 5.862524,24.971612 8.991284,24.971612"></path>
        </svg>
    </a>
    

    

    

    

    

    

    

    

    

    
    <a class="social-icon" href="https://www.linkedin.com/in/nakabonne" target="_blank" rel="noopener" title="LinkedIn">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M2,3.654102 C2,2.69908141 2.79442509,1.92397846 3.77383592,1.92397846 L24.2261641,1.92397846 C25.2058917,1.92397846 26,2.69908141 26,3.654102 L26,24.3462148 C26,25.3015521 25.2058917,26.0760215 24.2261641,26.0760215 L3.77383592,26.0760215 C2.79442509,26.0760215 2,25.3015521 2,24.3465315 L2,3.65378524 L2,3.654102 Z M9.27526132,22.1415901 L9.27526132,11.2356668 L5.65030092,11.2356668 L5.65030092,22.1415901 L9.27557808,22.1415901 L9.27526132,22.1415901 Z M7.46341463,9.74691162 C8.72727273,9.74691162 9.51409566,8.90940767 9.51409566,7.86284447 C9.49033893,6.79252455 8.72727273,5.97846056 7.48748812,5.97846056 C6.24675325,5.97846056 5.43649034,6.79252455 5.43649034,7.86284447 C5.43649034,8.90940767 6.22299652,9.74691162 7.4396579,9.74691162 L7.46309788,9.74691162 L7.46341463,9.74691162 Z M11.2815965,22.1415901 L14.9062401,22.1415901 L14.9062401,16.0519481 C14.9062401,15.7263225 14.9299968,15.4000634 15.0256573,15.1675641 C15.2876148,14.5159962 15.8840672,13.8416218 16.8856509,13.8416218 C18.1970225,13.8416218 18.7218879,14.8416218 18.7218879,16.3078872 L18.7218879,22.1415901 L22.3465315,22.1415901 L22.3465315,15.8885017 C22.3465315,12.5388027 20.5584416,10.9800443 18.1735825,10.9800443 C16.2182452,10.9800443 15.3595185,12.072854 14.8824834,12.8172315 L14.9065569,12.8172315 L14.9065569,11.2359835 L11.2819132,11.2359835 C11.3291099,12.2591067 11.2815965,22.1419069 11.2815965,22.1419069 L11.2815965,22.1415901 Z"></path>
        </svg>
    </a>
    

    

    

    

    

    

    

    
    
    
    <a class="social-icon" href="https://github.com/nakabonne" target="_blank" rel="noopener" title="GitHub">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M13.9988029,1.32087331 C6.82105037,1.32087331 1,7.14112562 1,14.3212723 C1,20.0649109 4.72454649,24.9370678 9.89038951,26.6560892 C10.5408085,26.7757983 10.7778323,26.374374 10.7778323,26.0296121 C10.7778323,25.7215609 10.7666595,24.9035493 10.760275,23.8189856 C7.14426471,24.6042767 6.38131925,22.0760223 6.38131925,22.0760223 C5.78995672,20.5740732 4.93762853,20.1742451 4.93762853,20.1742451 C3.75729765,19.3682044 5.02701126,19.3841656 5.02701126,19.3841656 C6.33183953,19.4759425 7.01817121,20.7241085 7.01817121,20.7241085 C8.17775254,22.7104801 10.0611744,22.1366749 10.8017741,21.8038838 C10.919887,20.9643246 11.2558703,20.3913175 11.6269683,20.066507 C8.74038491,19.7385043 5.70536235,18.6228163 5.70536235,13.6413251 C5.70536235,12.2223743 6.21213051,11.0611968 7.04370914,10.1530044 C6.90963504,9.82420367 6.46351945,8.50181809 7.17139875,6.71256734 C7.17139875,6.71256734 8.26234691,6.36301702 10.7459099,8.04532771 C11.78259,7.75642995 12.8950858,7.61277914 14.000399,7.60719272 C15.1049142,7.61277914 16.2166119,7.75642995 17.2548881,8.04532771 C19.736855,6.36301702 20.8262071,6.71256734 20.8262071,6.71256734 C21.5356825,8.50181809 21.0895669,9.82420367 20.9562909,10.1530044 C21.7894656,11.0611968 22.2922435,12.2223743 22.2922435,13.6413251 C22.2922435,18.6355852 19.2524325,19.734514 16.3570705,20.0561322 C16.8231376,20.4575564 17.2389269,21.2508282 17.2389269,22.4638795 C17.2389269,24.2012564 17.2229657,25.603448 17.2229657,26.0296121 C17.2229657,26.3775663 17.4575954,26.7821827 18.116793,26.6552912 C23.2786458,24.9322794 27,20.0633148 27,14.3212723 C27,7.14112562 21.1789496,1.32087331 13.9988029,1.32087331"></path>
        </svg>
    </a>
    

    
    
    

    

    

    

    

</div>




	<script src="https://nakabonne.dev/js/main.min.fa5c2b23e07b5d9bfad267a52b4b24fdb053e6fb7524993383594926a3ac270c.js" integrity="sha256-+lwrI+B7XZv60melK0sk/bBT5vt1JJkzg1lJJqOsJww="></script>
</footer>

    </body>
</html>